# Use our runtime-generated upstream file
resolv-file=/etc/dnsmasq.upstream.conf

# Listen only on the container loopback
listen-address=127.0.0.1
bind-dynamic

# DNS port
port=53

# Caching
cache-size=1000
neg-ttl=60
# Optional: enforce a minimum TTL to smooth bursts (comment out if not needed)
# min-cache-ttl=30

# DNSSEC
domain-needed

# Bogus private domains (RFC 1918)
bogus-priv

# Optional: local overrides
# addn-hosts=/etc/dnsmasq.d/hosts.conf

# Log (stderr so you can see it in task logs)
# log-queries is commented out to prevent logging all queries.
# log-facility=- logs to stderr, but will log only warnings and errors since log-queries is not set.
# By default, dnsmasq will only log warnings and errors unless log-queries is enabled.
#log-queries
log-facility=-
# No further configuration is needed. Only warnings and errors will be logged.

# Prevent DNS rebinding attacks
#stop-dns-rebind
#rebind-localhost-ok

# Disable DHCP on all interfaces
no-dhcp-interface=*
